# BacPipes - Portable Edge Data Collection System
# Copy this file to .env for your deployment
#
# IMPORTANT: BACnet and MQTT settings are loaded from DATABASE, not .env!
# - Configure BACnet IP via Settings GUI (auto-detects if not set)
# - Configure MQTT broker via Settings GUI
# - Environment variables below are FALLBACKS ONLY

# ============================================================================
# Database Configuration (Required)
# ============================================================================
POSTGRES_USER=anatoli
POSTGRES_DB=bacpipes
# Note: Port 5434 (not 5432) because docker-compose.yml sets PGPORT=5434 with network_mode: host
DATABASE_URL=postgresql://anatoli@localhost:5434/bacpipes

# ============================================================================
# BACnet Configuration (OPTIONAL - Loaded from Database)
# ============================================================================
# These are fallback values only. Configure via Settings GUI instead.
# If not set anywhere, worker will auto-detect local IP address.
#
# BACNET_IP=192.168.1.32        # Auto-detected if not configured
# BACNET_PORT=47808              # Default: 47808 (BACnet/IP standard)
# BACNET_DEVICE_ID=3001234       # Unique device ID for this instance

# ============================================================================
# MQTT Broker Configuration (OPTIONAL - Loaded from Database)
# ============================================================================
# These are fallback values only. Configure via Settings GUI instead.
#
# MQTT_BROKER=10.0.60.3          # External MQTT broker IP
# MQTT_PORT=1883                 # Default: 1883 (MQTT standard)
MQTT_CLIENT_ID=bacpipes_worker # Unique client identifier

# ============================================================================
# TimescaleDB Time-Series Database (Optional - for historical data)
# ============================================================================
# Worker writes historical data directly to TimescaleDB
# If unavailable, data flows via MQTT → Telegraf → TimescaleDB
#
TIMESCALEDB_HOST=localhost         # Default: localhost (uses host networking)
TIMESCALEDB_PORT=5435              # Default: 5435 (TimescaleDB service port)
TIMESCALEDB_DB=timescaledb         # Database name
TIMESCALEDB_USER=anatoli           # Database user
TIMESCALEDB_PASSWORD=              # Database password (empty for trust auth)

# ============================================================================
# Worker Configuration
# ============================================================================
POLL_INTERVAL=60               # Default polling interval (seconds)

# ============================================================================
# System Configuration
# ============================================================================
TZ=Asia/Kuala_Lumpur           # Timezone for timestamps
NODE_ENV=production            # Environment: development | production
