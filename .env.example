# BacPipes - Portable Edge Data Collection System
# Copy this file to .env for your deployment
#
# IMPORTANT: BACnet and MQTT settings are loaded from DATABASE, not .env!
# - Configure BACnet IP via Settings GUI (auto-detects if not set)
# - Configure MQTT broker via Settings GUI
# - Environment variables below are FALLBACKS ONLY

# ============================================================================
# Database Configuration (Required)
# ============================================================================
POSTGRES_USER=anatoli
POSTGRES_DB=bacpipes
# Note: Uses service name 'postgres' with bridge networking
# Bridge networking is used for LXC container compatibility
# External port 5434 maps to internal port 5432
DATABASE_URL=postgresql://anatoli@postgres:5432/bacpipes

# ============================================================================
# BACnet Configuration (OPTIONAL - Loaded from Database)
# ============================================================================
# These are fallback values only. Configure via Settings GUI instead.
# If not set anywhere, worker will auto-detect local IP address.
#
# BACNET_IP=192.168.1.32        # Auto-detected if not configured
# BACNET_PORT=47808              # Default: 47808 (BACnet/IP standard)
# BACNET_DEVICE_ID=3001234       # Unique device ID for this instance

# ============================================================================
# MQTT Broker Configuration (OPTIONAL - Loaded from Database)
# ============================================================================
# These are fallback values only. Configure via Settings GUI instead.
#
# MQTT_BROKER=10.0.60.3          # External MQTT broker IP
# MQTT_PORT=1883                 # Default: 1883 (MQTT standard)
MQTT_CLIENT_ID=bacpipes_worker # Unique client identifier

# ============================================================================
# IMPORTANT: Default IPs are Placeholders
# ============================================================================
# The default values (192.168.1.32, 10.0.60.3) are initial placeholders.
# After deployment, configure actual IPs via Settings GUI:
#
# 1. Access web UI: http://your-ip:3001
# 2. Navigate to Settings
# 3. Enter correct BACnet IP and MQTT Broker IP
# 4. Save and restart worker: docker compose restart bacnet-worker
#
# Environment variables below are OPTIONAL overrides.
# If not set, system uses database defaults (configured via GUI).
#

# ============================================================================
# Fresh LXC Deployment Checklist
# ============================================================================
# 1. Enable LXC features: nesting=1,keyctl=1 (on Proxmox host)
# 2. Clone repository inside container
# 3. Run: docker compose up -d
# 4. Access UI: http://your-container-ip:3001
# 5. Configure IPs via Settings GUI
# 6. Restart worker: docker compose restart bacnet-worker
# 7. Run BACnet discovery
#

# ============================================================================
# Worker Configuration
# ============================================================================
POLL_INTERVAL=60               # Default polling interval (seconds)

# ============================================================================
# System Configuration
# ============================================================================
TZ=Asia/Kuala_Lumpur           # Timezone for timestamps
NODE_ENV=production            # Environment: development | production
